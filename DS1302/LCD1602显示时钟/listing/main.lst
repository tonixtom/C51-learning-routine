C51 COMPILER V9.54   MAIN                                                                  07/12/2020 16:52:01 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE scr\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\m
                    -ain.lst) TABS(2) OBJECT(.\output\main.obj)

line level    source

   1          /*******************************************************************************
   2          *                 
   3          *                            普中科技
   4          --------------------------------------------------------------------------------
   5          * 实 验 名     : DS1302时钟显示试验
   6          * 实验说明       : LCD1602显示时钟信息
   7          * 连接方式       : 见连接图
   8          * 注    意     : 
   9          *******************************************************************************/
  10          
  11          #include<reg51.h>
  12          #include"lcd.h"
  13          #include"ds1302.h"
  14          
  15          void LcdDisplay();
  16          
  17          /*******************************************************************************
  18          * 函数名         : main
  19          * 函数功能       : 主函数
  20          * 输入           : 无
  21          * 输出           : 无
  22          *******************************************************************************/
  23          
  24          void main()
  25          {
  26   1        LcdInit();
  27   1        Ds1302Init();
  28   1        while(1)
  29   1        { 
  30   2          Ds1302ReadTime();
  31   2          LcdDisplay(); 
  32   2        }
  33   1        
  34   1      }
  35          /*******************************************************************************
  36          * 函数名         : LcdDisplay()
  37          * 函数功能       : 显示函数
  38          * 输入           : 无
  39          * 输出           : 无
  40          *******************************************************************************/
  41          
  42          void LcdDisplay()
  43          {
  44   1        LcdWriteCom(0x80+0X40);
  45   1        LcdWriteData('0'+TIME[2]/16);       //时
  46   1        LcdWriteData('0'+(TIME[2]&0x0f));        
  47   1        LcdWriteData('-');
  48   1        LcdWriteData('0'+TIME[1]/16);       //分
  49   1        LcdWriteData('0'+(TIME[1]&0x0f)); 
  50   1        LcdWriteData('-');
  51   1        LcdWriteData('0'+TIME[0]/16);       //秒
  52   1        LcdWriteData('0'+(TIME[0]&0x0f));
  53   1      
  54   1        LcdWriteCom(0x80);
C51 COMPILER V9.54   MAIN                                                                  07/12/2020 16:52:01 PAGE 2   

  55   1        LcdWriteData('2');
  56   1        LcdWriteData('0');
  57   1        LcdWriteData('0'+TIME[6]/16);     //年
  58   1        LcdWriteData('0'+(TIME[6]&0x0f));
  59   1        LcdWriteData('-');
  60   1        LcdWriteData('0'+TIME[4]/16);     //月
  61   1        LcdWriteData('0'+(TIME[4]&0x0f));
  62   1        LcdWriteData('-');
  63   1        LcdWriteData('0'+TIME[3]/16);     //日
  64   1        LcdWriteData('0'+(TIME[3]&0x0f));
  65   1        LcdWriteCom(0x8D);
  66   1        LcdWriteData('0'+(TIME[5]&0x07)); //星期       
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
