C51 COMPILER V9.54   COUNTER                                                               07/27/2020 10:58:04 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE COUNTER
OBJECT MODULE PLACED IN .\output\counter.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE counter.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2) OBJECT(.\o
                    -utput\counter.obj)

line level    source

   1          /*******************************************************************************
   2          *  标题:                  计数器中断实验                                       *
   3          *                                        *
   4          *                                        *
   5          *  实验说明：用单片机产生的脉冲波，作为T0外部事件的脉冲输入，对于HC6800EM3的型 *
   6          *            号，可以自带的脉冲发生器作为T0外部事件的脉冲输入            *
   7          *  连接方法：参开图片或视频                                                    *
   8          ********************************************************************************
   9          *                                                            *
  10          * 请学员认真消化本例程，掌握定时器/计数器中断使用                              *
  11          ********************************************************************************/
  12          
  13          #include <reg52.h>
  14          #include<intrins.h>
  15          sbit LED = P0^0;
  16          sbit Pulse = P1^0;
  17          
  18          
  19          void Timer0() interrupt 1
  20          {
  21   1         TH0 = 0Xa0;  //给计数器装初值
  22   1         TL0 = 0X00;
  23   1         
  24   1         LED = ~LED;  //LED灯取反
  25   1      
  26   1      
  27   1      
  28   1      }
  29          
  30          void main()
  31          {
  32   1        P0 = 0XFF;          
  33   1        TMOD = 0X05;  //选用计数模式和 选用模式1
  34   1        TH0 = 0Xa0;   //给计数器装初值
  35   1        TL0 = 0x00;
  36   1        EA = 1;      //开发所有中断
  37   1        ET0 = 1;       //开启定时器T0中断
  38   1        TR0 = 1;       //启动T0定时器
  39   1        
  40   1        while(1)  
  41   1        { 
  42   2          Pulse = 0 ;  
  43   2          _nop_();   //空指令函数 用于产生方波
  44   2          _nop_();
  45   2        _nop_();
  46   2        _nop_();
  47   2        Pulse = 1 ;
  48   2        _nop_();
  49   2          _nop_();
  50   2        _nop_();
  51   2        _nop_();
  52   2        
  53   2        }
  54   1      
C51 COMPILER V9.54   COUNTER                                                               07/27/2020 10:58:04 PAGE 2   

  55   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     41    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
