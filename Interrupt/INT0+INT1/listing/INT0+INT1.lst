C51 COMPILER V9.54   INT0_INT1                                                             07/27/2020 10:42:50 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE INT0_INT1
OBJECT MODULE PLACED IN .\output\INT0+INT1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE INT0+INT1.C OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\
                    -INT0+INT1.lst) TABS(2) OBJECT(.\output\INT0+INT1.obj)

line level    source

   1          /*******************************************************************************
   2          *  标题:                  试验数码管上显示外部中断计数                         *
   3          *                                        *
   4          *  连接方法：参照接线图                                                *
   5          ********************************************************************************
   6          *                                                            *
   7          * 请学员认真消化本例程，用单片机脚直接控制数码管和外部中断使用                 *
   8          ********************************************************************************/
   9          
  10          
  11          #include < reg51.h >
  12          #include <intrins.h>
  13          
  14          sbit LS138A=P2^2;  
  15          sbit LS138B=P2^3;
  16          sbit LS138C=P2^4; 
  17          
  18          unsigned int LedNumVal_1,LedNumVal_2,LedOut[8];
  19          
  20          //此表为 LED 的字模, 共阴数码管 0-9  - 
  21          unsigned char code Disp_Tab[] = {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x40}; 
  22          
  23          
  24          void delay(unsigned int i)
  25          {
  26   1          char j;
  27   1          for(i; i > 0; i--)
  28   1              for(j = 200; j > 0; j--);
  29   1      }
  30          
  31          
  32          void main(void)
  33          {  unsigned char i;
  34   1      
  35   1         P0=0xff;
  36   1         P1=0xff;
  37   1         P2=0xff;
  38   1      
  39   1      
  40   1      // IT0=0;       //低电平触发
  41   1         IT0=1;       //下降沿触发
  42   1         EX0=1;
  43   1      
  44   1      
  45   1         
  46   1      // IT1=0;       //低电平触发
  47   1         IT1=1;       //下降沿触发
  48   1         EX1=1;
  49   1         EA=1;
  50   1      
  51   1      
  52   1         while(1)
  53   1         {    
  54   2           LedOut[0]=Disp_Tab[LedNumVal_1%10000/1000];
C51 COMPILER V9.54   INT0_INT1                                                             07/27/2020 10:42:50 PAGE 2   

  55   2           LedOut[1]=Disp_Tab[LedNumVal_1%1000/100]|0x80;   //0x7f小数点
  56   2           LedOut[2]=Disp_Tab[LedNumVal_1%100/10];
  57   2           LedOut[3]=Disp_Tab[LedNumVal_1%10];
  58   2      
  59   2         LedOut[4]=Disp_Tab[LedNumVal_2%10000/1000];
  60   2           LedOut[5]=Disp_Tab[LedNumVal_2%1000/100];
  61   2           LedOut[6]=Disp_Tab[LedNumVal_2%100/10];
  62   2           LedOut[7]=Disp_Tab[LedNumVal_2%10];
  63   2      
  64   2      
  65   2         for( i=0; i<8; i++) 
  66   2         {   P0 = LedOut[i];
  67   3            
  68   3          switch(i)           
  69   3             {      
  70   4            case 0:LS138A=0; LS138B=0; LS138C=0; break;         
  71   4                case 1:LS138A=1; LS138B=0; LS138C=0; break;               
  72   4                case 2:LS138A=0; LS138B=1; LS138C=0; break; 
  73   4                case 3:LS138A=1; LS138B=1; LS138C=0; break; 
  74   4            case 4:LS138A=0; LS138B=0; LS138C=1; break;
  75   4            case 5:LS138A=1; LS138B=0; LS138C=1; break;
  76   4            case 6:LS138A=0; LS138B=1; LS138C=1; break;
  77   4            case 7:LS138A=1; LS138B=1; LS138C=1; break;
  78   4            
  79   4             }
  80   3      
  81   3          delay(150);
  82   3         }
  83   2       
  84   2      
  85   2         }
  86   1      
  87   1      }
  88          
  89          
  90          
  91          /********************************************************
  92          * INT0中断函数                                          *
  93          ********************************************************/
  94          void  counter0(void) interrupt 0  using 1
  95          {
  96   1        
  97   1         EX0=0;  
  98   1         LedNumVal_1++;
  99   1         EX0=1;
 100   1      }
 101          /********************************************************
 102          * INT1中断函数                                          *
 103          ********************************************************/
 104          void  counter1(void) interrupt 2 using 2
 105          {
 106   1         
 107   1         EX1=0;
 108   1         LedNumVal_2++;
 109   1         EX1=1;
 110   1      }
 111          /********************************************************/
 112          
 113          


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.54   INT0_INT1                                                             07/27/2020 10:42:50 PAGE 3   

   CODE SIZE        =    498    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     20    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
