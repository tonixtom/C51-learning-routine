C51 COMPILER V9.54   MAIN                                                                  07/12/2020 16:57:42 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE src\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\m
                    -ain.lst) TABS(2) OBJECT(.\output\main.obj)

line level    source

   1          /*******************************************************************************
   2          *                 
   3          *                            ∆’÷–ø∆ºº
   4          --------------------------------------------------------------------------------
   5          *  µ —È √˚     : 18B20Œ¬∂»œ‘ æ ‘—È
   6          *  µ—ÈÀµ√˜       : LCD1602œ‘ æŒ¬∂»÷µ°£
   7          * ¡¨Ω”∑Ω Ω       : º˚¡¨Ω”Õº
   8          * ◊¢    “‚     : 
   9          *******************************************************************************/
  10          
  11          #include<reg51.h>
  12          #include"lcd.h"
  13          #include"temp.h"
  14          void LcdDisplay(int);
  15          /*******************************************************************************
  16          * ∫Ø ˝√˚         : main
  17          * ∫Ø ˝π¶ƒ‹       : ÷˜∫Ø ˝
  18          *  ‰»Î           : Œﬁ
  19          *  ‰≥ˆ           : Œﬁ
  20          *******************************************************************************/
  21          
  22          void main()
  23          {
  24   1        LcdInit();       //≥ı ºªØLCD1602
  25   1        LcdWriteCom(0x88);  //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  26   1        LcdWriteData('C'); 
  27   1        while(1)
  28   1        {
  29   2          LcdDisplay(Ds18b20ReadTemp());
  30   2      //    Delay1ms(1000);//1s÷”À¢“ª¥Œ
  31   2        }
  32   1      }
  33          
  34          /*******************************************************************************
  35          * ∫Ø ˝√˚         : LcdDisplay()
  36          * ∫Ø ˝π¶ƒ‹       : LCDœ‘ æ∂¡»°µΩµƒŒ¬∂»
  37          *  ‰»Î           : v
  38          *  ‰≥ˆ           : Œﬁ
  39          *******************************************************************************/
  40          
  41          void LcdDisplay(int temp)    //lcdœ‘ æ
  42          {
  43   1          
  44   1          unsigned char datas[] = {0, 0, 0, 0, 0}; //∂®“Â ˝◊È
  45   1        float tp;  
  46   1        if(temp< 0)       //µ±Œ¬∂»÷µŒ™∏∫ ˝
  47   1          {
  48   2            LcdWriteCom(0x80);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  49   2            LcdWriteData('-');      //œ‘ æ∏∫
  50   2          //“ÚŒ™∂¡»°µƒŒ¬∂» « µº Œ¬∂»µƒ≤π¬Î£¨À˘“‘ºı1£¨‘Ÿ»°∑¥«Û≥ˆ‘≠¬Î
  51   2          temp=temp-1;
  52   2          temp=~temp;
  53   2          tp=temp;
  54   2          temp=tp*0.0625*100+0.5; 
C51 COMPILER V9.54   MAIN                                                                  07/12/2020 16:57:42 PAGE 2   

  55   2          //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  56   2          //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  57   2          //À„”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  58   2       
  59   2          }
  60   1        else
  61   1          {     
  62   2            LcdWriteCom(0x80);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  63   2            LcdWriteData('+');    //œ‘ æ’˝
  64   2          tp=temp;//“ÚŒ™ ˝æ›¥¶¿Ì”––° ˝µ„À˘“‘Ω´Œ¬∂»∏≥∏¯“ª∏ˆ∏°µ„–Õ±‰¡ø
  65   2          //»Áπ˚Œ¬∂» «’˝µƒƒ«√¥£¨ƒ«√¥’˝ ˝µƒ‘≠¬ÎæÕ «≤π¬ÎÀ¸±æ…Ì
  66   2          temp=tp*0.0625*100+0.5; 
  67   2          //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  68   2          //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  69   2          //À„º”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  70   2        }
  71   1        datas[0] = temp / 10000;
  72   1        datas[1] = temp % 10000 / 1000;
  73   1        datas[2] = temp % 1000 / 100;
  74   1        datas[3] = temp % 100 / 10;
  75   1        datas[4] = temp % 10;
  76   1       
  77   1        LcdWriteCom(0x82);      //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  78   1        LcdWriteData('0'+datas[0]); //∞ŸŒª 
  79   1      
  80   1        
  81   1        LcdWriteCom(0x83);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  82   1        LcdWriteData('0'+datas[1]); // ÆŒª
  83   1      
  84   1        LcdWriteCom(0x84);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  85   1        LcdWriteData('0'+datas[2]); //∏ˆŒª 
  86   1      
  87   1        LcdWriteCom(0x85);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  88   1        LcdWriteData('.');    //œ‘ æ °Æ.°Ø
  89   1      
  90   1        LcdWriteCom(0x86);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  91   1        LcdWriteData('0'+datas[3]); //œ‘ æ–° ˝µ„  
  92   1      
  93   1        LcdWriteCom(0x87);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  94   1        LcdWriteData('0'+datas[4]); //œ‘ æ–° ˝µ„  
  95   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    318    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
