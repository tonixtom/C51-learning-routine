C51 COMPILER V9.56.0.0   MAIN                                                              02/01/2020 15:40:21 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: G:\softs\kile_v5_S\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include"reg51.h"
   2          #include"XPT2046.h"
   3          #include"lcd.h"
   4          
   5          
   6          //--声明全局变量--//
   7          void Delay10ms(unsigned int c);   //误差 0us
   8          unsigned char DisplayData[8];   //用来存放要显示的8位数的值
   9          void LcdDisplay();
  10          
  11          
  12          void main(void)
  13          {
  14   1        uint temp,count;
  15   1        LcdInit();
  16   1        while(1)
  17   1        {
  18   2           if(count==10)
  19   2          {
  20   3            count=0; 
  21   3            temp = Read_AD_Data(0x94);    //   AIN0 电位器      通道地址  001
  22   3        //  temp = Read_AD_Data(0xD4);    //   AIN1 热敏电阻    通道地址  101
  23   3        //  temp = Read_AD_Data(0xA4);    //   AIN2 光敏电阻    通道地址  010
  24   3        //  temp = Read_AD_Data(0xE4);    //   AIN3 外部输入    通道地址  110
  25   3            }
  26   2          count++;
  27   2          DisplayData[0]=0;
  28   2          DisplayData[1]=0;
  29   2          DisplayData[2]=0;
  30   2          DisplayData[3]=0;
  31   2      
  32   2          DisplayData[4]=temp%10000/1000;
  33   2          DisplayData[5]=temp%1000/100;
  34   2          DisplayData[6]=temp%100/10;
  35   2          DisplayData[7]=temp%10/1;
  36   2          LcdDisplay(); 
  37   2          //Delay10ms(50);
  38   2        }
  39   1      }
  40          
  41          
  42          /*******************************************************************************
  43          * 函数名         : LcdDisplay()
  44          * 函数功能       : 显示函数
  45          * 输入           : 无
  46          * 输出           : 无
  47          *******************************************************************************/
  48          
  49          void LcdDisplay()
  50          {
  51   1        uchar i;
  52   1        LcdWriteCom(0x80);
  53   1        for(i=0; i<8; i++)
  54   1          {   
  55   2            //LcdWriteData(PuZh[i]);  
C51 COMPILER V9.56.0.0   MAIN                                                              02/01/2020 15:40:21 PAGE 2   

  56   2            LcdWriteData('0'+DisplayData[i]);       
  57   2          }    
  58   1      }
  59          
  60          /*******************************************************************************
  61          * 函 数 名         : Delay10ms
  62          * 函数功能       : 延时函数，延时10ms
  63          * 输    入         : 无
  64          * 输    出         : 无
  65          *******************************************************************************/
  66          
  67          void Delay10ms(unsigned int c)   //误差 0us
  68          {
  69   1          unsigned char a, b;
  70   1      
  71   1        //--c已经在传递过来的时候已经赋值了，所以在for语句第一句就不用赋值了--//
  72   1          for (;c>0;c--)
  73   1        {
  74   2          for (b=38;b>0;b--)
  75   2          {
  76   3            for (a=130;a>0;a--);
  77   3          }          
  78   2        }       
  79   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    193    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
